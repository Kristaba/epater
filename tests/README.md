# Epater test procedures

## Overview

**epater** is composed of two distinct parts: the assembler and the emulator. We ensure the correctness of both by comparing their output and behavior to reference systems. For the assembler, we compare the generated bytecode with the one created by GCC for various instructions. For the emulator, we compare its behavior (that is, the state of the processor registers and the memory content) with the one from QEMU.

While these tests may not be as extensive as professional test suites (like ARM Compliance Test Suite), they do ensure that there is no obvious bugs in epater.

## Dependencies

### For the assembler tests

* GCC in ARM mode (in most Linux distributions, this can be installed using a package like *gcc-arm-linux-gnueabihf*). Also, the binutils tools must be installed (the test procedure uses `objcopy`)
* pytest

### For the emulator tests

* QEMU with support for ARMv4 architecture (ARM7TDMI core)
* [Unicorn Engine](https://github.com/unicorn-engine/unicorn) with Python bindings

## Running the tests

### Assembler tests

In the `tests/` subdirectory, run `test_assembler.py` with pytest :

pytest test_assembler.py

### Emulator tests

In the `tests/` subdirectory, run `test_emulator.py` :

python test_emulator.py

## License

**epater** is distributed under GPLv3 license (see LICENSE).
